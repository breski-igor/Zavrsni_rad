@{
    ViewData["Title"] = "Raspored Treninga";
}

@if (User.IsInRole("Admin"))
{
    <div class="upload-button-container">
        <a asp-action="Upload" class="btn btn-light btn-lg shadow upload-button" title="Upload Novi Raspored">
            <i class="fas fa-upload me-2"></i>Upload Raspored
        </a>
    </div>
}

<div class="schedule-container">
    <img src="~/images/schedule/training-schedule.jpg?t=@DateTime.Now.Ticks"
         alt="Raspored Treninga"
         class="schedule-image"
         onerror="this.style.display='none'; document.getElementById('noSchedule').style.display='block';" />
</div>

<div id="noSchedule" class="no-schedule-alert">
    <h5><i class="fas fa-calendar-times me-2"></i>Raspored nije dostupan</h5>
    <p class="mb-2">Trenutno nema uploadanog rasporeda treninga.</p>
    @if (User.IsInRole("Admin"))
    {
        <a asp-action="Upload" class="btn btn-light">
            <i class="fas fa-upload me-1"></i>Upload Raspored
        </a>
    }
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const img = document.querySelector('.schedule-image');
            img.onerror = function () {
                this.style.display = 'none';
                document.getElementById('noSchedule').style.display = 'block';
            };

            if (img.complete && img.naturalHeight === 0) {
                img.style.display = 'none';
                document.getElementById('noSchedule').style.display = 'block';
            }
        });
    </script>
}

<style>
    .upload-button-container {
        position: fixed;
        bottom: 80px;
        right: 20px;
        z-index: 1050;
    }

    .upload-button {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border: 1px solid #dee2e6;
        color: #333;
        font-weight: normal;
        padding: 12px 24px;
        border-radius: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        text-decoration: none;
        display: inline-block;
    }

        .upload-button:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            color: #222;
            border-color: #ced4da;
            text-decoration: none;
        }

        .upload-button:active {
            transform: translateY(0);
        }

    .schedule-container {
        position: relative;
        margin: 0;
        padding: 0;
        text-align: center;
    }

    .schedule-image {
        width: 100%;
        height: 100vh;
        object-fit: contain;
        border: none;
        border-radius: 0;
        box-shadow: none;
        background: transparent;
        -webkit-mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
        mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
    }

    .no-schedule-alert {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        background-color: rgba(13, 202, 240, 0.9);
        border: none;
        color: white;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
    }

    .btn-light {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border: 1px solid #dee2e6;
        color: #333;
        font-weight: normal;
        padding: 8px 16px;
        border-radius: 6px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        text-decoration: none;
        display: inline-block;
    }

        .btn-light:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            color: #222;
            border-color: #ced4da;
            text-decoration: none;
        }

        .btn-light:active {
            transform: translateY(0);
        }

    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
</style>